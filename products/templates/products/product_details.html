{% extends "../base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <!-- Left Section: Product Images -->
        <div class="col-12 col-lg-6">
            <div class="d-flex flex-column align-items-center">
                <!-- Main Image -->
                {% if product.image %}
                <img class="w-100 rounded mb-3" src="{{ product.image.url }}" alt="{{ product.name }}">
                {% else %}
                <img class="w-100 rounded mb-3" src="{% static 'images/noimage.png' %}" alt="{{ product.name }}">
                {% endif %}

                <!-- Thumbnails -->
                <div class="d-flex justify-content-center gap-2">
                    <img class="rounded" src="#" alt="{{ product.name }}" style="width: 60px; height: 60px;">
                    <img class="rounded" src="#" alt="{{ product.name }}" style="width: 60px; height: 60px;">
                    <img class="rounded" src="#" alt="{{ product.name }}" style="width: 60px; height: 60px;">
                </div>
            </div>
        </div>

        <!-- Right Section: Product Info -->
        <div class="col-12 col-lg-6">
            <h1 class="mb-3">{{ product.name }}</h1>
            <p class="text-muted">{{ product.short_description }}</p>

            <!-- Price -->
            <h2 class="text-success mb-3">Â£{{ product.price }}</h2>

            <!-- Attributes -->
            <ul class="list-unstyled mb-3">
                <li><strong>Category:</strong> {{ product.category.display_name }}</li>
                <li><strong>Region:</strong> {{ product.region.display_name }}</li>
                {% if product.size %}
                <li><strong>Size:</strong> {{ product.size }}ml</li>
                {% endif %}
                {% if product.abv %}
                <li><strong>ABV:</strong> {{ product.abv }}%</li>
                {% endif %}
                <li><strong>Stock:</strong> {{ product.stock }}</li>
            </ul>

            <!-- Quantity and Add to Cart -->
            <form class="mb-3" action="{% url 'add_to_cart' product.pk %}" method="POST">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="quantity" class="form-label">Quantity:</label>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.stock }}" class="form-control w-25">
                </div>
                <button type="submit" class="btn btn-primary w-100">Add to Cart</button>
            </form>

            <!-- Additional Actions -->
            <div class="d-flex justify-content-between">
                <a href="{% url 'products' %}" class="btn btn-outline-secondary">Back to Products</a>
                {% if request.user.is_superuser %}
                <div>
                    <a class="btn btn-warning me-2" href="{% url 'edit_product' product.pk %}">Edit</a>
                    <a class="btn btn-danger" href="{% url 'delete_product' product.pk %}">Delete</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Reviews Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h3>Reviews</h3>
            <div class="border-top pt-3">
                <div class="mb-3">
                    <strong>Helen M.</strong> <span class="text-muted">(Yesterday)</span>
                    <p>Excellent running shoes. It turns very sharply on the foot.</p>
                </div>
                <div class="mb-3">
                    <strong>Ann D.</strong> <span class="text-muted">(2 days ago)</span>
                    <p>Good shoes.</p>
                </div>
                <div class="mb-3">
                    <strong>Andrew G.</strong> <span class="text-muted">(2 days ago)</span>
                    <p>Is it suitable for running?</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
